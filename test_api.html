<!DOCTYPE html>
<html>
    <head>
        <title>File Upload</title>
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
            integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
            crossorigin=""/>
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin="">
        </script>

        <link rel="stylesheet" href="test_api.css">
    </head>
    <body>
        <h1>File Upload</h1>
        <form action="http://149.165.154.247/upload" method="POST" enctype="multipart/form-data">
            <input type="file" name="file" required>
            email <input type="text" name="email" required>
            lat <input id="lat" type="number" step="0.000001" name="lat" required>
            lng <input id="lng" type="number" step="0.000001" name="lng" required>
            <div id="map"></div>
            description <input type="text" name="description" required>
            <button type="submit">Upload</button>
        </form>

        <script>
            let southWest = L.latLng(20.805385510716093, -156.73919677734378);
            let northEast = L.latLng(20.933704959327144, -156.60186767578128);
            let bounds = L.latLngBounds(southWest, northEast);
            let map = L.map("map", {
                maxBounds: bounds,
                minZoom: 13,
                maxZoom: 20
            }).setView([20.871593978421544, -156.6777849197388], 18);
            L.tileLayer("http://www.google.com/maps/vt?lyrs=y@189&gl=en&x={x}&y={y}&z={z}", {
                maxZoom: 20
            }).addTo(map);
            map.on("click", (e) => {
                let {lat, lng} = e.latlng;
                //round to 6 decimals
                let precision = Math.pow(10, 6);
                lat = Math.round(lat * precision) / precision;
                lng = Math.round(lng * precision) / precision;
                document.getElementById("lat").value = lat;
                document.getElementById("lng").value = lng;
            });
        </script>

    </body>
</html>